<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>01_미니계산기</title>
</head>


<script>

    //1) C버튼을 클릭하면 id=result에 0을 대입
    function cls() {
        document.getElementById("result").value = 0;
    }//cls() end

    //2) 클릭한 숫자 버튼에 맞는 숫자를 출력하기
    function inputData(su) { //su 매개변수 parameter
        // alert(su);
        // document.getElementById("result").value += su;

        //id=result값을 숫자형으로 변환 "0123" => 123
        su = Number(document.getElementById("result").value + su)
        document.getElementById("result").value = su;

    }//inputData() end


    //3) ← 버튼을 클릭하면 id=result값에서 마지막 글자부터 순서대로 지우기
    // id=result값에서 마지막 글자만 제외시키고 다시대입
    //단, 자릿수가 한개임 값은 0으로 대입

    function backspace() {

        //a)id=result값을 가져와서 글가갯수 춝력하기
        let result = document.getElementById("result").value;
        // alert(result)
        // alert(result.length)

        //b) 처음 글자부터 마지막 글를 제외시키고 문자열 가져오기(substring())
        //예) 입력문자열아 "789"라고 가정햇을떄
        let len = result.length; //3
        // alert(result.substring(0, 2)); //"78"
        // alert(result.substring(0, len - 1)); //"78"

        // c) 분리된 b)문자열을 다시 id=result에 대입하기
        // 단 글자갯수가 1개이면 0으로 다시대입
        if (len == 1) {
            document.getElementById("result").value = 0;
        } else {
            document.getElementById("result").value = result.substring(0, len - 1);
        }//if end
    }//backspase() end


    //4) 연산에 필요한 전역변수 선언하기
    let op; //연산기호
    let num1; // 사용자가 입력한 첫번쨰 수
    let num2; // 사용자가 입력한 두번쨰 수
    let num3;
    function operator(kind) {// = - * /
        // alert(kind)

        // 5) 클릭한 연산기호를 전역변수 op에 저장하기
        op = kind;

        // 6) 현재 id=result가 가지고 있는 값을 num1에 저장하기
        num1 = Number(document.getElementById("result").value);

        // 7)두번째 수를 입력받기 위해 id=result값을 추가하기
        cls();

    }//operator() end

    function compute() {
        //8) 계산에 필요한 두번째 수를 num2에 저장하기
        num2 = Number(document.getElementById("result").value);

        // alert(op)
        // alert(num1)
        // alert(num2)
        cls();

        //9) 
        num3 = document.getElementById("result").value = eval(num1 + op + num2);

    }//compute() end



</script>

<style>
    .txt {
        border: 2px solid #000;
        text-align: right;
        font-weight: bold;
        font-size: 20px;
        color: black;
        height: 30px;
        background: #f5f5f5;
    }


    .btn input {
        width: 100%;
        text-align: center;
        font-weight: bold;
        font-size: 20px;
    }
</style>

<body>

    <h3>미니계산기</h3>

    <form>
        <table border="3" ;>
            <tr>
                <td colspan="4">
                    <input class="txt" type="text" name="result" id="result" size="23" value="0" readonly>
                </td>
            </tr>

            <tr class="btn">
                <td><input type="button" value="7" onclick="inputData(7)"></td>
                <td><input type="button" value="8" onclick="inputData(8)"></td>
                <td><input type="button" value="9" onclick="inputData(9)"></td>
                <td><input type="button" value="÷" onclick="operator('/')"></td>
            </tr>

            <tr class="btn">
                <td><input type="button" value="4" onclick="inputData(4)"></td>
                <td><input type="button" value="5" onclick="inputData(5)"></td>
                <td><input type="button" value="6" onclick="inputData(6)"></td>
                <td><input type="button" value="*" onclick="operator('*')"></td>
            </tr>

            <tr class="btn">
                <td><input type="button" value="1" onclick="inputData(1)"></td>
                <td><input type="button" value="2" onclick="inputData(2)"></td>
                <td><input type="button" value="3" onclick="inputData(3)"></td>
                <td><input type="button" value="-" onclick="operator('-')"></td>
            </tr>

            <tr class="btn">
                <td><input type="button" value="0" onclick="inputData(0)"></td>
                <td><input type="button" value="." onclick="inputData('.')"></td>
                <td><input type="button" value="=" onclick="compute('=')"></td>
                <td><input type="button" value="+" onclick="operator('+')"></td>
            </tr>

            <tr class="btn">
                <td colspan="2"><input type="button" value="←" onclick="backspace()"></td>
                <td colspan="2"><input type="button" value="C" onclick="cls('C')"></td>
            </tr>

        </table>
    </form>
</body>



</html>